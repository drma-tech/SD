@inherits ComponentCore<PageSection>

@if (Visible)
{
    if (ShowHead)
    {
        <MudPaper Class="@PaperClass" Style="background-color: transparent;" Outlined="true" Elevation="0">
            <MudToolBar WrapContent="true" Dense="true" Gutters="false" Style="min-height: auto;">
                @if (!string.IsNullOrEmpty(Icon))
                {
                    <MudIcon Icon="@Icon" Class="me-2" Color="Color"></MudIcon>
                }
                else if (!string.IsNullOrEmpty(Image))
                {
                    <MudImage Src="@Image" Class="me-2" Style="height: 36px; vertical-align: sub;" Alt="@Image"></MudImage>
                }
                <MudText Typo="Typo.h2" Color="Color" Style="font-size: 23px; line-height: 1.2;">
                    @Title
                </MudText>
                @if (ButtonAction || IsDesktop)
                {
                    <MudSpacer></MudSpacer>
                }
                @if (ActionFragment != null)
                {
                    <div style="@(ButtonAction || IsDesktop ? "display: contents;" : "width: 100%; display: flex;")">
                        @ActionFragment
                    </div>
                }
            </MudToolBar>
            @if (Description.NotEmpty())
            {
                <div style="text-align: justify;" class="mt-2">
                    <MudText Typo="Typo.body1" Align="Align.Justify" Style="line-height: 1.2">
                        @Description
                    </MudText>
                </div>
            }
        </MudPaper>
    }
    <div class="@BodyClass">
        @BodyFragment
    </div>
}

@code {
    [Parameter][EditorRequired] public string? Title { get; set; }
    [Parameter] public string? Description { get; set; }

    [Parameter] public Color Color { get; set; } = MudBlazor.Color.Primary;
    [Parameter] public string? Icon { get; set; }
    [Parameter] public string? Image { get; set; }
   
    [Parameter] public bool ShowHead { get; set; } = true;
    [Parameter] public bool Visible { get; set; } = true;
    [Parameter] public string? PaperClass { get; set; } = "mb-4 pa-2";
    [Parameter] public string? BodyClass { get; set; } = "mb-4";

    [Parameter] public RenderFragment? ActionFragment { get; set; }
    [Parameter][EditorRequired] public RenderFragment? BodyFragment { get; set; }

    [Parameter] public bool ButtonAction { get; set; } = true;
    private bool IsDesktop => Breakpoint > Breakpoint.Xs;
}
