"use strict";function normalizeReason(n){if(n instanceof Error){const t=["message","stack","code","constraint","constraintName","target",].filter(t=>n[t]&&t!=="message").map(t=>`${t}: ${typeof n[t]=="object"?JSON.stringify(n[t]):n[t]}`).join(", ");return{message:n.message||n.name+(t?` (${t})`:""),stack:n.stack||"No stack trace"}}if(typeof n=="string")return{message:n,stack:n.stack||"No stack trace"};let t;try{t=JSON.stringify(n)}catch{t="[Unserializable reason]"}return{message:t||"Unknown error",stack:n.stack||"No stack trace"}}async function AuthStateChanged(n){if(!isBot){let i=n?await n.getIdToken():null;await invokeDotNetWhenReady("SD.WEB","AuthChanged",i);let t=getUser();t&&typeof Userback!="undefined"&&Userback&&Userback.identify(t.userId,{name:t.name,email:t.email})}}window.addEventListener("load",function(){const i=performance.now(),n=document.getElementById("app"),t=document.querySelector(".loading-message");if(n){const r=setInterval(()=>{const f=(performance.now()-i)/1e3,u=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--blazor-load-percentage")||"0");n.classList.remove("slow-connection","very-slow-connection","extremely-slow-connection");f>80&&u<100?(n.classList.add("extremely-slow-connection"),t.textContent="Still loading. Something may be holding things up."):f>50&&u<100?(n.classList.add("very-slow-connection"),t.textContent="Still loading. This may take a little longer."):f>20&&u<100&&(n.classList.add("slow-connection"),t.textContent="This is taking a bit longer than expected.");u>=100&&clearInterval(r)},1e3)}});window.addEventListener("error",function(n){const{message:r,filename:t,lineno:u,colno:f,error:i}=n;if(t?.includes("blazor.webassembly.js"))showBrowserWarning();else{const e={Message:`message:${r}|error.message:${i?.message}`,StackTrace:i?.stack,Origin:`event error - filename:${t}|url:${window.location.href}|lineno:${u}|colno:${f}`,OperationSystem:getOperatingSystem(),BrowserName:getBrowserName(),BrowserVersion:getBrowserVersion(),Platform:GetLocalStorage("platform"),AppVersion:GetLocalStorage("app-version"),UserAgent:navigator.userAgent};sendLog(e);isBot||showError(`error: ${n.message}`)}});window.addEventListener("unhandledrejection",function(n){const{message:t,stack:i}=normalizeReason(n.reason);if(!navigator.userAgent.includes("Mediapartners-Google")){const r={Message:t,StackTrace:i,Origin:`event unhandledrejection - url:${window.location.href}`,OperationSystem:getOperatingSystem(),BrowserName:getBrowserName(),BrowserVersion:getBrowserVersion(),Platform:GetLocalStorage("platform"),AppVersion:GetLocalStorage("app-version"),UserAgent:navigator.userAgent};if(sendLog(r),!isBot){if(typeof t=="string"&&t.includes("Failed to fetch")){showError("Connection problem detected. Check your internet connection and try reloading.");return}showError(`unhandledrejection: ${t}`)}}});window.addEventListener("securitypolicyviolation",n=>{const t={violatedDirective:n.violatedDirective,blockedURI:n.blockedURI,sourceFile:n.sourceFile,lineNumber:n.lineNumber,url:window.location.href};sendLog(`securitypolicyviolation: ${JSON.stringify(t)}`)});let resizeTimeout;window.addEventListener("resize",function(){clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){const n=document.querySelectorAll('[id^="swiper-trailer-"]');n.forEach(function(n){window.initGrid&&window.initGrid(n.id)})},250)});window.addEventListener("offline",()=>{showError("It looks like you're offline. Please check your connection.")});document.addEventListener("click",async n=>{n.target?.closest(".btnEnableNotifications")&&requestMessagingPermission()});