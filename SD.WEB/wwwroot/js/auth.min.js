"use strict";const firebaseConfig={apiKey:"AIzaSyDj5LpsT7-bra4hvuvb5E_BPSlD7Wr29nQ",authDomain:"streaming-discovery-4c483.firebaseapp.com",projectId:"streaming-discovery-4c483",storageBucket:"streaming-discovery-4c483.firebasestorage.app",messagingSenderId:"394152837411",appId:"1:394152837411:web:06b7216d2859bdc1224c96",measurementId:"G-JKXTVXM0EX"};firebase.apps.length||firebase.initializeApp(firebaseConfig);const auth=firebase.auth();auth.getRedirectResult().then(n=>{if(console.log("=== REDIRECT RESULT DEBUG ==="),console.log("User:",n.user),console.log("Credential:",n.credential),console.log("OperationType:",n.operationType),console.log("AdditionalUserInfo:",n.additionalUserInfo),console.log("=== END DEBUG ==="),n.user)return n.user.getIdToken().then(n=>{DotNet.invokeMethodAsync("SD.WEB","AuthChanged",n),showToast("Login successful via redirect!")});if(console.log("No user in redirect result"),auth.currentUser)return auth.currentUser.getIdToken().then(n=>{DotNet.invokeMethodAsync("SD.WEB","AuthChanged",n)});DotNet.invokeMethodAsync("SD.WEB","AuthChanged",null)}).catch(n=>{console.error("Redirect result error:",n),auth.currentUser?auth.currentUser.getIdToken().then(n=>{DotNet.invokeMethodAsync("SD.WEB","AuthChanged",n)}):DotNet.invokeMethodAsync("SD.WEB","AuthChanged",null)});auth.onAuthStateChanged(async n=>{const t=n?await n.getIdToken():null;DotNet.invokeMethodAsync("SD.WEB","AuthChanged",t);showToast("onAuthStateChanged");showToast(`token:${t}`)});window.firebaseAuth={signIn:async()=>{const n=new firebase.auth.GoogleAuthProvider;window.location.hostname==="localhost"?await auth.signInWithPopup(n):await auth.signInWithRedirect(n)},signOut:async()=>{await auth.signOut()}};