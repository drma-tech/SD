<!DOCTYPE html>
<html lang="en" data-bs-theme="light">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <meta name="theme-color" content="#343a40" />

    <base href="/" />
    <link rel="manifest" href="manifest.webmanifest" />

    <link rel="stylesheet" href="css/app.min.css" />
    <link rel="stylesheet" href="css/custom_app.min.css" />
    <link rel="stylesheet" href="SD.WEB.styles.css" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <link rel="stylesheet" href="_content/Blazorise/blazorise.min.css" />
    <link rel="stylesheet" href="_content/Blazorise.Bootstrap5/blazorise.bootstrap5.min.css" />
    <link rel="stylesheet" href="_content/Blazorise.Snackbar/blazorise.snackbar.min.css" />
    <link rel="stylesheet" href="_content/Blazorise.Icons.FontAwesome/v6/css/all.min.css">

    <script defer src="https://cdn.paddle.com/paddle/v2/paddle.js"></script>
    <script defer src="js/paddle.js"></script>
    <script src="js/util.js"></script>

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5922021468622891" crossorigin="anonymous"></script>

    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        if (!window.location.host.includes('localhost')) {
            (function (c, l, a, r, i, t, y) {
                c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments) };
                t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
                y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
            })(window, document, "clarity", "script", "r2iwqdpwtv");

            // Check if Clarity is loaded and call the consent function
            var clarityCheckInterval = setInterval(function () {
                if (window.clarity) {
                    window.clarity('consent');
                    clearInterval(clarityCheckInterval);
                }
            }, 10000);
        }
    </script>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4PREF5QX1F"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        getUserInfo().then(userId => {
            if (userId) {
                gtag('config', 'G-4PREF5QX1F', {
                    'user_id': userId
                });
            }
            else {
                gtag('config', 'G-4PREF5QX1F');
            }
        });
    </script>
    <script>
        const meta = document.createElement('meta');
        meta.name = 'robots';
        meta.content = window.location.hostname.includes('dev') ? 'noindex, nofollow' : "index";
        document.head.appendChild(meta);
    </script>
</head>

<body style="overflow: hidden;">
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="." class="reload">Reload</a>
        <span class="dismiss">ðŸ—™</span>
    </div>

    <script>
        //avoid google (and others) search console execute this
        if (!/google|baidu|bingbot|duckduckbot|teoma|slurp|yandex/i.test(window.navigator.userAgent) &&
            window.navigator.serviceWorker && window.navigator.serviceWorker.register) {
            navigator.serviceWorker.register('service-worker.js');
        }
    </script>

    <script>
        const isModernBrowser = (() => {
            try {
                // Test basic required APIs
                if (typeof WebAssembly !== "object") return false;
                if (typeof WebAssembly.instantiate !== "function") return false;
                if (typeof BigInt !== "function") return false;
                if (typeof fetch !== "function") return false;
                if (typeof Promise !== "function") return false;

                // Safely test modern syntax using Function (optional chaining / nullish coalescing)
                new Function("const obj = { foo: null }; const x = obj && obj.foo !== undefined ? obj.foo : 'ok';");

                return true;
            } catch (e) {
                console.error("Browser not supported:", e);
                return false;
            }
        })();

        if (!isModernBrowser) {
            showBrowserWarning();
        }

        window.addEventListener('error', function (e) {
            if (e.filename && e.filename.includes('blazor.webassembly.js')) {
                showBrowserWarning();
            }
        });

        function showBrowserWarning() {
            document.body.innerHTML = `
                <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;padding:20px;font-family:sans-serif;">
                    <h1>Unsupported Browser</h1>
                    <p>Your browser is too old to run this application.</p>
                    <p>Use the latest version of your browser (Chrome, Edge, Firefox, Safari, etc).</p>
                </div>
            `;
        }
    </script>

    <script src="_content/Microsoft.Authentication.WebAssembly.Msal/AuthenticationService.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>

    <script async src="_content/Toolbelt.Blazor.PWA.Updater.Service/script.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script async src="js/swiper.js"></script>

    <script>
        const appHeight = () => document.documentElement.style.setProperty('--app-height', `${window.innerHeight}px`)
        window.addEventListener('resize', appHeight)
        appHeight()
    </script>
</body>
</html>