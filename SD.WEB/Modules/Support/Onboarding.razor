@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@inherits ComponentCore<Onboarding>

<MudDialog Style="width: 100%; height: 100%; max-width: 600px; max-height: 600px;">
    <DialogContent>
        <MudCarousel @ref="mudCarousel" Class="mud-width-full" Style="height: calc(100% - 56px);" ShowArrows="false" ShowBullets="false" BulletsPosition="Position.Top"
                     AutoCycle="false" TData="object" SelectedIndexChanged="StateHasChanged">
            <MudCarouselItem>
                <div class="pa-4" style="text-align: center; height: 100%;">
                    <MudImage Src="images/onboarding-step-1.png" Style="height: 200px;"></MudImage>
                    <MudText Typo="Typo.h6" Color="Color.Secondary">
                        @Resources.Translations.Step1Title
                    </MudText>
                    <MudText Typo="Typo.h6">
                        @Resources.Translations.Step1Subtitle
                    </MudText>
                </div>
            </MudCarouselItem>
            <MudCarouselItem>
                <div class="pa-4" style="text-align: center; height: 100%;">
                    <MudImage Src="images/onboarding-step-2.png" Style="height: 200px;"></MudImage>
                    <MudText Typo="Typo.h6" Color="Color.Secondary">
                        @Resources.Translations.Step2Title
                    </MudText>
                    <MudText Typo="Typo.h6">
                        @Resources.Translations.Step2Subtitle
                    </MudText>
                </div>
            </MudCarouselItem>
            <MudCarouselItem>
                <div class="pa-4" style="text-align: center; height: 100%;">
                    <MudImage Src="images/onboarding-step-3.png" Style="height: 200px;"></MudImage>
                    <MudText Typo="Typo.h6" Color="Color.Secondary">
                        @Resources.Translations.Step3Title
                    </MudText>
                    <MudText Typo="Typo.h6">
                        @Resources.Translations.Step3Subtitle
                    </MudText>
                </div>
            </MudCarouselItem>
            <MudCarouselItem>
                <div class="pa-4" style="text-align: center; height: 100%;">
                    <MudImage Src="icon/icon-300.png" Style="height: 200px;"></MudImage>
                    <MudText Typo="Typo.h6" Color="Color.Secondary">
                        @Resources.Translations.Step4Title
                    </MudText>
                    <MudText Typo="Typo.h6">
                        @Resources.Translations.Step4Subtitle
                    </MudText>
                </div>
            </MudCarouselItem>
        </MudCarousel>
        <div class="py-2 px-4 d-flex" style="text-align: center; width: 100%; justify-content: space-between;">
            @if (mudCarousel?.SelectedIndex == mudCarousel?.Items.Count - 1)
            {
                <MudButton Variant="Variant.Filled" Color="Color.Primary" IconColor="Color.Secondary" OnClick="Login" FullWidth="true" StartIcon="@IconsFA.Solid.Icon("right-to-bracket").Font">
                    @Button.Login
                </MudButton>
            }
            else
            {
                <MudButton Variant="Variant.Filled" Color="Color.Default" OnClick="() => MudDialog?.Close()">@WEB.Resources.Button.Close</MudButton>
                <MudChip T="string" Text="@($"{mudCarousel?.SelectedIndex + 1} - {mudCarousel?.Items.Count}")" Class="mx-3"></MudChip>
                <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(() => { mudCarousel?.Next(); StateHasChanged(); })">@WEB.Resources.Button.Next</MudButton>
            }
        </div>
    </DialogContent>
</MudDialog>

@code {
    [CascadingParameter] private IMudDialogInstance? MudDialog { get; set; }

    private MudCarousel<object>? mudCarousel;

    private void Login()
    {
        Navigation.NavigateToLogin("/authentication/login");
    }
}
