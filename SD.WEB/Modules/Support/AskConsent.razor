@page "/ask-consent"
@using SD.WEB.Modules.Auth.Resources

@inherits PageCore<AskConsent>

<SeoHeader Title="Ask Consent" Description="Ask Consent" Url="/ask-consent" Index="false" Keywords="@([])"></SeoHeader>

<MudPaper Elevation="0" Outlined="true" Class="@Css.Build().Small("pa")">
    <MudCheckBox @bind-Value="_terms1" Color="Color.Primary" Class="@Css.Build().Small("mb")">
        <MudText Inline="true">
            @((MarkupString)string.Format(Translations.Terms1, $"<a href='support/terms' target='_blank' class='mud-link mud-primary-text mud-link-underline-hover'>{Modules.Support.Resources.Translations.TermsUse}</a>", $"<a href='support/privacy' target='_blank' class='mud-link mud-primary-text mud-link-underline-hover'>{Modules.Support.Resources.Translations.PrivacyPolicy}</a>"))
        </MudText>
    </MudCheckBox>

    <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="Consent" Disabled="(!_terms1)">
        @Button.Confirm
    </MudButton>
</MudPaper>

@code {
    private bool _terms1 { get; set; } = false;

    private async Task Consent()
    {
        try
        {
            await JsRuntime.Utils().SetStorage("consent", true);
            Navigation.NavigateTo("/", true);
        }
        catch (Exception ex)
        {
            await ProcessException(ex);
        }
    }
}
