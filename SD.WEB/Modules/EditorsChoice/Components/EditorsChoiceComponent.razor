@using SD.WEB.Modules.Collections.Core
@using SD.WEB.Modules.Collections.Resources
@inherits ComponentCore<EditorsChoiceComponent>

@inject TmdbListApi TmdbListApi

<NewPageSection Title="@Translations.EditorsChoiceTitle" Description="@GlobalTranslations.CertifiedDescription" Icon="@IconsFA.Solid.Icon("award").Font">
    <BodyFragment>
        <MudTabs KeepPanelsAlive="true" MinimumTabWidth="100" ApplyEffectsToContainer="true" TabPanelsClass="@Css.Build().Small("pt")"
                 ActivePanelIndex="@(TypeSelected == MediaType.movie ? 0 : 1)" ActivePanelIndexChanged="@(async (int index) => { TypeSelected = index == 0 ? MediaType.movie : MediaType.tv; })">
            <Header>
                <MudTooltip Text="Expand">
                    <MudIconButton Icon="@IconsFA.Solid.Icon("expand").Font" Href="@($"/editors-choice/{TypeSelected}")" />
                </MudTooltip>
            </Header>
            <ChildContent>
                <MudTabPanel Text="@MediaType.movie.GetName()">
                    <NewMediaList MediaListApi="TmdbListApi" List="@EnumLists.CertifiedStreamingDiscoveryMovies" Watched="Watched" Watching="Watching" Wish="Wish">
                    </NewMediaList>
                </MudTabPanel>
                <MudTabPanel Text="@MediaType.tv.GetName()">
                    <NewMediaList MediaListApi="TmdbListApi" List="@EnumLists.CertifiedStreamingDiscoveryShows" Watched="Watched" Watching="Watching" Wish="Wish">
                    </NewMediaList>
                </MudTabPanel>
            </ChildContent>
        </MudTabs>
    </BodyFragment>
</NewPageSection>

@code {
    [Parameter][EditorRequired] public WatchedList? Watched { get; set; }
    [Parameter][EditorRequired] public WatchingList? Watching { get; set; }
    [Parameter][EditorRequired] public WishList? Wish { get; set; }

    public MediaType TypeSelected { get; set; } = MediaType.movie;

    public Dictionary<string, string> Params { get; set; } = new() { { "mode", "compact" } };
}